# Exemple de configuration client
# Copiez ce fichier et renommez-le en : clientname.caddy

# Exemple : erp.casaobras.com → base de données "casaobras"
erp.casaobras.com {
    # Forcer la sélection de la base de données
    @no_db_param {
        not query db=*
    }
    handle @no_db_param {
        redir * "{uri}?db=casaobras" 307
    }
    
    reverse_proxy odoo:8069
    
    log {
        output file /var/log/caddy/casaobras.log
    }
}

# Autre exemple : crm.iya.com → base de données "iya"
# crm.iya.com {
#     @no_db_param {
#         not query db=*
#     }
#     handle @no_db_param {
#         redir * "{uri}?db=iya" 307
#     }
#     
#     reverse_proxy odoo:8069
#     
#     log {
#         output file /var/log/caddy/iya.log
#     }
# }

# Autre exemple : admin.autreclient.com → base de données "autreclient"
# admin.autreclient.com {
#     @no_db_param {
#         not query db=*
#     }
#     handle @no_db_param {
#         redir * "{uri}?db=autreclient" 307
#     }
#     
#     reverse_proxy odoo:8069
#     
#     log {
#         output file /var/log/caddy/autreclient.log
#     }
# }

